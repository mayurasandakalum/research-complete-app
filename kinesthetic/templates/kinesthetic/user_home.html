{% extends "base.html" %}
{% block title %}Let's Quiz | Mixed Questions{% endblock %}

{% block content %}
<div class="container py-5">
    <h1 class="text-center mb-5">‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∂´‡∂∫</h1>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h2 class="card-title mb-0">‡∂∏‡∑í‡∑Å‡∑ä‚Äç‡∂ª ‡∂¥‡∑è‡∂©‡∂∏‡∑ä ‡∂∏‡∂ü‡∑í‡∂±‡∑ä ‡∂â‡∂ú‡∑ô‡∂±‡∂ú‡∂±‡∑ä‡∂±</h2>
                    <a href="http://localhost:5000/student_dashboard" class="btn btn-outline-primary btn-sm">
                        <i class="fa fa-arrow-left"></i> ‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂¥‡∑î‡∑Ä‡∂ª‡∑î‡∑Ä‡∂ß ‡∂Ü‡∂¥‡∑É‡∑î
                    </a>
                </div>
                <div class="card-body text-center">
                    <p class="card-text">‡∑Ä‡∑í‡∑Ä‡∑í‡∂∞ ‡∑Ä‡∑í‡∑Ç‡∂∫ ‡∂ö‡∑ä‡∑Ç‡∑ö‡∂≠‡∑ä‚Äç‡∂ª ‡∑Ä‡∂Ω ‡∂∏‡∑í‡∑Å‡∑ä‚Äç‡∂ª ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± 15 (‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏, ‡∂Ö‡∂©‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑É‡∑Ñ ‡∂ö‡∑è‡∂Ω‡∂∫)</p>

                    {% if kinesthetic_profile and kinesthetic_profile.mixed_quiz_completed %}
                    <div class="completion-banner bg-success text-white p-3 rounded mb-4">
                        <h4>‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂∫‡∑í! üéâ</h4>
                        <p class="lead mb-0">‡∂î‡∂∂‡∑ö ‡∂Ω‡∂ö‡∑î‡∂´‡∑î: {{ kinesthetic_profile.total_score }}</p>
                    </div>
                    <a href="{{ url_for('kinesthetic.leaderboard') }}" class="btn btn-primary">
                        ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±
                    </a>
                    {% else %}
                    <div class="progress mb-3" style="height: 30px;">
                        {% set progress = (kinesthetic_profile.current_lesson_attempts or 0) / 15 * 100 if
                        kinesthetic_profile else 0 %}
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                            style="width: {{ progress }}%;" aria-valuenow="{{ progress }}" aria-valuemin="0"
                            aria-valuemax="100">
                            {% if kinesthetic_profile %}{{ kinesthetic_profile.current_lesson_attempts }}/15{% else
                            %}0/15{% endif %}
                        </div>
                    </div>
                    <p class="card-text">‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂ö‡∑Ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±:
                        {% if kinesthetic_profile %}
                        <strong>{{ kinesthetic_profile.current_lesson_attempts }}/15</strong>
                        {% else %}
                        <strong>0/15</strong>
                        {% endif %}
                    </p>
                    <a href="{{ url_for('kinesthetic.play') }}" class="btn btn-primary btn-lg">
                        <i class="fa fa-play-circle"></i> ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∂´‡∂∫ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
                    </a>
                    {% endif %}
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header">
                    <h3>‡∑Ä‡∑í‡∑Ç‡∂∫ ‡∂¥‡∑ä‚Äç‡∂ª‡∂ú‡∂≠‡∑í‡∂∫</h3>
                </div>
                <div class="card-body">
                    <div class="subject-progress">
                        {% if kinesthetic_profile and kinesthetic_profile.subject_counts %}
                        {% for subject, count in kinesthetic_profile.subject_counts.items() %}
                        <div class="subject-item mb-3">
                            <div class="d-flex justify-content-between">
                                <span>
                                    {% if subject == 'addition' %}‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
                                    {% elif subject == 'subtraction' %}‡∂Ö‡∂©‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
                                    {% elif subject == 'time' %}‡∂ö‡∑è‡∂Ω‡∂∫
                                    {% else %}{{ subject }}
                                    {% endif %}
                                </span>
                                <span>{{ count }} ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±</span>
                            </div>
                            <div class="progress" style="height: 10px;">
                                <div class="progress-bar 
                                            {% if subject == 'addition' %}bg-success
                                            {% elif subject == 'subtraction' %}bg-warning
                                            {% elif subject == 'time' %}bg-info
                                            {% else %}bg-primary
                                            {% endif %}" style="width: {{ count / 15 * 100 }}%" role="progressbar">
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        {% else %}
                        <p>‡∂î‡∂∂ ‡∂≠‡∑Ä‡∂∏ ‡∂ö‡∑í‡∑É‡∑í‡∂Ø‡∑î ‡∑Ä‡∑í‡∑Ç‡∂∫ ‡∂¥‡∂Æ‡∂∫‡∂ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂ö‡∂ª ‡∂±‡∑ê‡∂≠.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}